<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>LWS Protocol</title>
    <script src="https://www.w3.org/Tools/respec/respec-w3c" class="remove"></script>
    <link rel="stylesheet" href="local.css"/>
    <script class='remove'>
      // See https://respec.org/docs/ for how to configure ReSpec
      var respecConfig = {
        specStatus: "ED",
        shortName: "lws-protocol",
        editors: [{
          name: "Pierre-Antoine Champin"
        }, {
          name: "ericP"
        }, {
          name: "Jesse Wright"
        }, {
          name: "Erich Bremer"
        }],
        formerEditors: [{
          name: "Sarven Capadisli",
        }, {
          name: "Justin Bingham",
        }, {
          name: "Dmitri Zagidulin",
        }, {
          name: "Ruben Verborgh",
        }, {
          name: "Tim Berners-Lee",
        }, {
          name: "Kjetil Kjernsmo",
        }],
        github: "w3c/lws-protocol",
        shortName: "@@",
        xref: ["web-platform"],
        group: "lws",
      };
    </script>
  </head>
  <body>
    <section id="abstract">
      <p>
        [@@ from <a href="https://www.w3.org/2024/09/linked-web-storage-wg-charter#lws-protocol">charter</a>]
      </p>
      <p>
        The Linked Web Storage Protocol specification aims to provide applications with secure and permissioned access to externally stored data in an interoperable way.
      </p>

      <p>
        The Linked Web Storage Protocol <span class="TODO">does/does not</span> include protocol details for integration with identity layers and mechanisms; access management and data integrity; notifications about resource changes; and authorization mechanisms.
      </p>
    </section>
    <section id="sotd">
      <p>
        This is an unofficial proposal.
      </p>
    </section>

    <section id="editors-notes" class="informative notoc">
      <h2>For Editors</h2>
      <p>
        List of <span class="TODO">TODO</span>s and ideas in flux to enable editors to communicate asynchronously.
      </p>

      <section id="editors-resz">
        <h3>Resources</h3>
        <ul>
          <li><a href="https://respec.org/docs/">respec docs</a></li>
          <li><a href="https://solidproject.org/TR/protocol">CG report - 2024-05-12</a></li>
          <li><a href="https://solidproject.org/ED/protocol">Editor's draft - 2025-04-12</a></li>
          <li>CG-to-ED delta: <ul>
              <li class="ins"><ins>+ Previous editors: Added formal past editors section recognizing Justin Bingham, Dmitri Zagidulin, Sarven Capadisli, Tim Berners-Lee and Ruben Verborgh</ins></li>
              <li class="ins"><ins>+ HTTP Server MUST generate a Last-Modified header field in response to GET and HEAD requests.</ins></li>
              <li><del>- The PATCH ?insertions formulae MUST NOT contain blank nodes.</del></li>
              <li><ins>+ IANA Reg Security Considerations: Servers are strongly encouraged to implement additional security measures…</ins></li>
              <li><ins>+ IANA Reg Privacy Considerations: Servers are encouraged to respond with the 451 status code…</ins></li>
          </ul></li>
        </ul>
      </section>

      <section id="editors-tactics">
        <h3>Tactics</h3>
        <ul>
          <li>Reference <a href="https://w3c.github.io/lws-ucs/spec/#glossary">UCS Glossary</a> for now to keep them in sync.</li>
          <li>Include REST examples but keep spec abstract to:<ul>
              <li>provide intuitive names for states, operations, and responses</li>
              <li>factor states, operations and responses so e.g. <a>update resource</a> responses are the same from HTTP PATCH or from HTTP PUT</li>
              <li>enable alternate bindings.</li>
          </ul></li>
          <li>I like to have a marker (e.g. left-border) to highlight informative regions, but it's pretty ugly.</li>
          <li></li>
        </ul>
      </section>
    </section>

    <section id="conventions" class="informative">
      <h2>Document Conventions</h2>
      <dl>
        <dt></dt><dd><dd/>
      </dl>
    </section>

    <section id="introduction">
      <h2>Introduction</h2>
      <p>
      </p>
      
      <section id="resource-access">
        <h2>Resource Access</h2>
        <p>
          The LWS Protocol defines standard interactions by which a some party can make some resources available to some agents.
        </p>

        <ul>
          <li><dfn>served resource</dfn> - (<span class="TOOD">available resource? published resource?</span>) (<span class="TOOD"><a href="https://github.com/w3c/lws-ucs/issues/160">not defined in UCS</a></span>) A network-accessible entity exposed by a service for interaction, retrieval, or manipulation using the protocol defined in this document.</li>
          <li><dfn>requesting agent</dfn> - (<span class="TOOD"><a href="https://w3c.github.io/lws-ucs/spec/#dfn-entity">entity</a> in UCS</span>) An entity (e.g., client, user, or process) that initiates a request to interact with a servable resource.</li>
        </ul>

        <p>
        </p>
      </section>
      
      <section id="security-privacy">
        <h2>Security and Privacy</h2>
        <p>
          A <a>resource manager</a> may keep a <a>served resource</a> private, may make it publicly available to anyone, or may limited its visibility to a constrained set of <a>requesting agents</a>.
        </p>

        <ul>
          <li><dfn>authentication</dfn> - the process of verifying the identity of an agent executing a request.</li>
          <li><dfn>authorization</dfn> - the process of determining whether an agent has permission to access a specific resource or perform one of a set of <a>operations</a>.</li>
          <li><dfn>resource manager</dfn> - (<a href="https://w3c.github.io/lws-ucs/spec/#dfn-controller">controller</a> in UCS) An agent that has permission to control access to a <a>served resource</a>.</li>
        </ul>

        <p>
        </p>
      </section>

      <section id="conformance">
        <!-- Respec automagically adds the heading. -->
        <p>
          A <dfn>LWS REST Server</dfn> is an HTTP server [[!rfc9112]] that complies with all of the relevant "MUST" statements in this specification. Specifically, the relevant normative "MUST" statements in Sections <span class="TODO">999</span> <a href="#rest-binding">REST Binding</a> of this document MUST be respected.
        </p>

        <p>
          A <dfn>LWS REST Client</dfn> is an HTTP client [[!rfc9112]] that complies with all of the relevant "MUST" statements in this specification. Specifically, the relevant normative "MUST" statements in Sections <span class="TODO">999</span> <a href="#rest-binding">REST Binding</a> of this document MUST be respected.
        </p>
      </section>
    </section>

    <section id="terminology">
      <h2>Terminology</h2>
      <p>
        The terms "authorization server" and "client" are defined by the OAuth 2.0 Authorization Framework [[!RFC6749]].
      <p>
      <p>
        The terms "end-user" and "issuer" are defined by OpenID Connect Core 1.0 [[!OPENID-CONNECT-CORE]].
      </p>

      <p>
        This specificaiton defines the following terms:
      </p>
      <ul>
        <li><dfn>end-user credential</dfn> &mdash; a security token that asserts claims about an end-user. This token is secured with a cryptographic proof.</li>
        <li><dfn>authentication suite</dfn> &mdash; a defined validation mechanism for a concrete serialization of an end-user credential.</li>
      </ul>

      <p>
        This specification defines <a>operations</a> on <a>served resources</a>, the resulting change of state, and a <a>response</a> indended to give the <a>requesting agent</a> requested infomation or inform them of the outcome of the <a>operation</a>.
        An <dfn>operation</dfn> is any of the following actions that can be performed on a <a>served resource</a>:
      </p>
      <ul>
        <li><dfn data-lt="creation">create resource</dfn> - </li>
        <li><dfn data-lt="retrieval">read resource</dfn> - </li>
        <li><dfn>update resource</dfn> - </li>
        <li><dfn data-lt="deletion">delete resource</dfn> - </li>
      </ul>

      <p>
        The folowing section will describe the semantics and <dfn>responses</dfn> of these operations but the following <dfn>core responses</dfn> apply to any operation:
      </p>
      <ul>
        <li><dfn>success</dfn> - the operation is believe to have completed. This may be accompanied by a <dfn>resource representation</dfn> conveying the contents of a <a>served resource</a>. A <a>success</a> response is not defined for the <a>create resource</a> operation. See instead <a>created</a>.</li>
        <li><dfn>not permitted</dfn></li>
        <li><dfn>unknown requester</dfn></li>
        <li><dfn>unknown error</dfn> - reserved for error conditions that arrise that are not anticipated by the specification</li>
      </ul>
    </section>

    <section id="authentication">
      <h2>Authentication</h2>
      <div data-include="Authentication.html" data-include-replace="true"></div>
    </section>

    <section id="authorization">
      <h2>Authorization</h2>
      <div data-include="Authorization.html" data-include-replace="true"></div>
    </section>

    <section id="discovery">
      <h2>Discovery</h2>
      <div data-include="Discovery.html" data-include-replace="true"></div>
    </section>

    <section id="logical-resource-organization">
      <h2>Logical Resource Organization</h2>
	  <div data-include="logicalresourceorganization.md" data-include-format="markdown" data-include-replace="true"></div>
    </section>

    <section id="operations">
      <h2>Operations</h2>
	  <div data-include="operations.md" data-include-format="markdown" data-include-replace="true"></div>

      <section id="create-resource">
        <h2>create resource</h2>
		<div data-include="Operations/create-resource.md" data-include-format="markdown" data-include-replace="true"></div>		
      </section>

      <section id="read-resource">
        <h2>read resource</h2>
		<div data-include="Operations/read-resource.md" data-include-format="markdown" data-include-replace="true"></div>
      </section>

      <section id="update-resource">
        <h2>update resource</h2>
		<div data-include="Operations/update-resource.md" data-include-format="markdown" data-include-replace="true"></div>
      </section>

      <section id="delete-resource">
        <h2>delete resource</h2>
		<div data-include="Operations/delete-resource.md" data-include-format="markdown" data-include-replace="true"></div>
      </section>
    </section>

    <section id="rest-binding">
      <h2>REST Binding</h2>
	  <div data-include="Rest-Binding/restbinding.md" data-include-format="markdown" data-include-replace="true"></div>
	  <div data-include="Rest-Binding/metadata.md" data-include-format="markdown" data-include-replace="true"></div>
	  <div data-include="Rest-Binding/rest-create-resource.md" data-include-format="markdown" data-include-replace="true"></div>
	  <div data-include="Rest-Binding/rest-read-resource.md" data-include-format="markdown" data-include-replace="true"></div>
	  <div data-include="Rest-Binding/rest-update-resource.md" data-include-format="markdown" data-include-replace="true"></div>
	  <div data-include="Rest-Binding/rest-delete-resource.md" data-include-format="markdown" data-include-replace="true"></div>
	  <div data-include="Rest-Binding/rest-table.md" data-include-format="markdown" data-include-replace="true"></div>
    </section>

    <section id="resource-identification">
		<h2>Resource Identification</h2>
		<p>
			<span class="TODO">Define how resources are identified and addressed within the LWS Protocol, including URI schemes, resource naming conventions, and resolution mechanisms. This section may be moved within another section; e.g. Resource Access</span>
		</p>
		<div data-include="Resource-Identification.md" data-include-format="markdown" data-include-replace="true"></div>
    </section>

    <section id="unstable-features" data-feature-status="unstable">
      <h2>Unstable Features</h2>
      <div class="advisement">
        <p>
          The features described in this section are being drafted to ground discussions and may be removed if there is:
        </p>
        <ul>
          <li>Lack of consensus to include them, or</li>
          <li>Lack of implementation of those features</li>
        </ul>
      </div>
	  
	  <div data-include="Unstable-Features.md" data-include-format="markdown" data-include-replace="true"></div>

      <section id="profile-negotiation">
        <h3>Profile Negotiation on Resources</h3>
        <p>
          <span class="TODO">Define mechanisms for content negotiation based on profiles, allowing clients to request specific representations or views of resources (e.g., JSON-LD contexts, different RDF serializations, or application-specific profiles).</span>
        </p>
		<div data-include="Unstable-Features/Profile-Negotiation-on-Resources.md" data-include-format="markdown" data-include-replace="true"></div>
      </section>

      <section id="notifications">
        <h3>Notifications</h3>
        <p>
          <span class="TODO">Define notification mechanisms that allow clients to be informed of changes to resources, including subscription models, event formats, and delivery mechanisms.</span>
        </p>
		<div data-include="Unstable-Features/Notifications.md" data-include-format="markdown" data-include-replace="true"></div>
      </section>

      <section id="inbox-semantics">
        <h3>Inbox</h3>
        <p>
          <span class="TODO">Define inbox resources with specific semantics within LWS, including message posting, retrieval, and management capabilities for asynchronous communication patterns.</span>
        </p>
		<div data-include="Unstable-Features/Inbox.md" data-include-format="markdown" data-include-replace="true"></div>
      </section>
    </section>

    <section id="portability-considerations">
      <h2>Portability Considerations</h2>
      <p>
        <span class="TODO">Describe considerations for ensuring LWS implementations can work across different platforms, environments, and storage backends while maintaining interoperability - and provide affordances to enable change in storage providers</span>
      </p>
	  <div data-include="Portability-Considerations.md" data-include-format="markdown" data-include-replace="true"></div>
    </section>

    <section id="security-considerations" class="informative">
      <h2>Security Considerations</h2>
      <p>
        <span class="TODO">Formal security considerations section covering threat models, security requirements, and implementation guidance for secure LWS deployments.</span>
      </p>
      <div data-include="Security-Considerations.html" data-include-replace="true"></div>
    </section>

    <section id="privacy-considerations">
      <h2>Privacy Considerations</h2>
      <p>
        <span class="TODO">Privacy implications of the LWS Protocol, including data minimization, user consent, and privacy-preserving implementation patterns.</span>
      </p>
	    <div data-include="Privacy-Considerations.html" data-include-replace="true"></div>
    </section>

    <section id="iana-considerations" class="informative">
      <h2>IANA Considerations</h2>
      <div data-include="IANA-Considerations.html" data-include-replace="true"></div>
    </section>
  </body>
</html>
